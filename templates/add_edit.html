{% extends "base/base.html" %} 
{% block head %} 
{% endblock %} 
{% block content %}

<div
  style="
    border-radius: 15px;
  "
>
  <div
    class="d-flex d-sm-flex d-md-flex d-lg-flex d-xl-flex flex-column justify-content-center align-items-center flex-sm-column justify-content-sm-center align-items-sm-center flex-md-column justify-content-md-center align-items-md-center flex-lg-column justify-content-lg-center align-items-lg-center flex-xl-column justify-content-xl-center align-items-xl-center"
  >
    <h2
      style="
        color: rgba(255, 255, 255, 0.87);
        font-weight: bold;
        margin-top: 40px;
      "
    >
      Fates List
    </h2>
    <p
      style="
        color: rgba(255, 255, 255, 0.87);
        font-weight: bold;
        opacity: 0.78;
        font-size: 21px;
      "
    >
    {%if mode == "edit" %}Edit your bot here.{%else%}Add your bot here!{%endif%}
    </p>
    {% if not error %}
    {% else %}
    <div class="alert alert-danger" style="text-align: center; justify-content: center; color: white !important;" role="alert">
            <strong>{{error}}</strong>
    </div>
    {% endif %}
  </div>
  <hr
    style="
      font-size: 20px;
      border-top-width: 1px;
      border-top-color: #eee;
      width: 70%;
    "
  />
    <div class="form-group" style="color: blue; width: 80%; margin: 0 auto; height: auto; margin-top: 30px; color: rgba(255, 255, 255, 0.87)">
        <div class="form-group" class="d-flex" style="margin: 15px auto; width: 85%;color: white; font-weight: bold; overflow-wrap: anywhere;">
   {% if mode == "edit" %}
   <section style="border-style: solid; border-radius: 50px 50px 50px 50px; padding-left: 30px; padding-right: 30px;">
    <div style="margin 15px auto">
   {% if bot.vanity != None %}
    <h6 style="color: white; margin-top: 1px !important;">Vanity URL: <span style="font-size: 14px; opacity: 0.9">https://fateslist.xyz/{{bot.vanity}}</span></h6>
    {% endif %}
    </div>
    <h6 style="color: white; margin-top: 1px !important; font-size: 12.5px;">API Token: <span style="font-size: 11.5px; opacity: 0.9">{{bot.api_token}}</span></h6>
   </section>
   {% endif %}
  <form
    style="height: auto; margin-top: 30px; color: rgba(255, 255, 255, 0.87); text-align: center;"
    id="bot_form"
    method="POST"
  >
    <div class="form-group">
<div class="container">
  <div class="row">
	  <div class="col-lg">
    <h5 style="font-weight: bold; margin-bottom: 15px;">Basic Information</h5>
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="bot_id"
	>Bot ID <span style="color: red; font-weight: bold" aria-hidden="true">*</span>
      </label>
      <input
	{% if mode == "edit" %}disabled{% endif %}
        required
        class="form-control"
        type="number"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 400px;
	  margin: auto;
	  margin-top: 7px;
	  margin-bottom: 30px;
        "
        name="bot_id"
        placeholder="12345678998764"
        value="{{bot.bot_id}}"
      />
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="extra_owners"
        >Extra Owners (Comma Seperated)</label>
      <input
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 400px;
	  margin: auto;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="extra_owners"
        value="{% if bot.extra_owners == [] or not bot.extra_owners or bot.extra_owners == "None" or bot.extra_owners == ""%}{% else %}{{bot.extra_owners.__str__().replace("[", "").replace("]", "").replace(" ", "")}} {% endif %}"
        placeholder="1234567899876,1234567865432"
        minlength="10"
      />
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
	"
        for="prefix"
        >Prefix <span style="color: red; font-weight: bold" aria-hidden="true">*</span>
      </label>
      <input
        required
        class="form-control"
        type="text"
        style="
	  margin: auto;
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 80px;
	  margin-top: 7px; 
	  margin-bottom: 30px;
        "
	maxlength=9
        name="prefix"
        placeholder="!"
        value="{{bot.prefix}}"
      />
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="library"
        >Library <span style="color: red; font-weight: bold" aria-hidden="true">*</span></label
      ><input
        required
        class="form-control"
        type="text"
        style="
	  margin: auto;
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 150px;
	  margin-top: 7px; 
	  margin-bottom: 30px;
        "
        name="library"
        placeholder="Discord.py"
        value="{{bot.library}}"
      />
  </div>
  <div class="col-lg">
     <h5 style="font-weight: bold; margin-bottom: 15px;">Bot Settings</h5>
     <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="invite"
        >Invite URL</label
      ><input
        required
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 1000px;
	  margin-top: 7px;
          margin-bottom: 30px;
        "
        name="invite"
        placeholder="https://discord.com/oauth2/authorize?client_id=12345637172158464&amp;permissions=314432&amp;scope=bot"
        minlength="10"
        value="{{bot.invite}}"
      /><label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="website"
        >Website URL</label
      ><input
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 1000px;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="website"
        placeholder="https://support.com"
        minlength="10"
        value="{{bot.website}}"
      /><label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="website"
        >Banner URL (optimal: 255x143px)</label
      ><input
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 1000px;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="banner"
        placeholder="https://cdn.discordapp.com/MySecretBanner.com"
        minlength="10"
        value="{% if bot.banner == "none" or bot.banner == "" %}{%else%}{{bot.banner}}{%endif%}"
      /><label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="support"
        >Support server</label
      ><input
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 1000px;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="support"
        placeholder="https://discord.gg/738Hs"
        minlength="10"
        value="{{bot.support}}"
      />
      {% if mode == "edit" %}
      <label
      style="
        color: white;
        font-weight: bold;
        font-size: 16px;
      "
      for="webhook"
      >Webhook(Not required)</label
    ><input
      class="form-control"
      type="text"
      style="
        background: #ffffff;
        border: grey;
        border-radius: 5px;
        max-width: 1000px;
        margin-top: 7px;
        margin-bottom: 30px;
      "
      name="webhook"
      placeholder="http://129.332.123:5000/webhook"
      minlength="3"
      {% if bot.webhook != None %}value="{{bot.webhook}}" {%endif%}
    />
    <label
      style="
        color: white;
        font-weight: bold;
        font-size: 16px;
      "
      for="vanity"
      >Vanity (https://fateslist.xyz/v/VANITY_URL)</label
    ><input
      class="form-control"
      type="text"
      style="
        background: #ffffff;
        border: grey;
        border-radius: 5px;
        max-width: 1000px;
        margin-top: 7px;
        margin-bottom: 30px;
      "
      name="vanity"
      placeholder="cats"
      minlength="3"
      {% if bot.vanity != None %}value="{{bot.vanity}}"{%endif%}
    />
<label
      style="
        color: white;
        font-weight: bold;
        font-size: 16px;
      "
      for="github"
      >Github (https://www.github.com/XYZ/XYZ)</label
    ><input
      class="form-control"
      type="text"
      style="
        background: #ffffff;
        border: grey;
        border-radius: 5px;
        max-width: 1000px;
        margin-top: 7px;
        margin-bottom: 30px;
      "
      name="github"
      placeholder="https://www.github.com/XYZ/XYZ"
      minlength="3"
      {% if bot.github != None %}value="{{bot.github}}"{%endif%}
    />
    {% endif %}
  </div>
  </div>
<h5 style="font-weight: bold; margin-bottom: 15px;">Bot Features</h5>
<div class="container">
<div class="row">
<div class-"col">
<div class="custom-control custom-switch" style="text-align: center; float: left;; display: block; margin-bottom: 3px;">
	<input type="checkbox" class="custom-control-input" id="custom_prefix" style="margin: auto !important;" name="custom_prefix" {%if bot.features and "custom_prefix" in bot.features %}checked{% endif %}/>
	<label class="custom-control-label" for="custom_prefix">Custom Prefix -> Can your prefix be customized/changed?</label>
</div><br/>
<div class="custom-control custom-switch" style="text-align: center; float: left;; display: block; margin-top: 15px;">
        <input type="checkbox" class="custom-control-input" id="open_source" style="margin: auto !important;" name="open_source" {%if bot.features and "open_source" in bot.features %}checked{% endif %}/>
	<label class="custom-control-label" for="open_source">Open Source -> Does your bot have it's code open to the public, preferrably on a git repository?</label>
</div>
</div></div><br/>
     <h5 style="font-weight: bold; margin-bottom: 15px;">Bot Purpose</h5>
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="description"
        >Short Description <span style="color: red; font-weight: bold" aria-hidden="true">*</span></label
      >
      <input
        required
        class="form-control"
        type="text"
        style="
          background: #ffffff;
          border: grey;
          border-radius: 5px;
          max-width: 1000px;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="description"
        placeholder="Fates list is a good bot that does everything you need"
        minlength="10"
        maxlength="100"
        value="{{bot.description}}"
      />
  <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
        "
        for="long_description"
        >Long description(Allows html and markdown) <span style="color: red; font-weight: bold" aria-hidden="true">*</span></label
      ><textarea
        class="form-control"
        style="
          background: #ffffff;
          border-radius: 5px;
          height: 150px;
          max-width: 1000px;
          margin-top: 7px;
          margin-bottom: 30px;
        "
        name="long_description"
        placeholder="Write about your bot using html or markdown"
        minlength="300"
        id="long_description"
	>{{bot.long_description}}</textarea>
      <label
        style="
          color: white;
          font-weight: bold;
          font-size: 16px;
          margin-top: 30px;
        "
        for="tags"
        >Select tags for your bot. <span style="color: red; font-weight: bold" aria-hidden="true">*</span></label
      ><span class="select_tags"></span>
      <div class="d-flex justify-content-center">
        <button
          class="btn btn-outline-light"
          type="submit"
          style="margin-top: 50px; margin-bottom: 30px"
        >
	{% if mode == "edit" %}Edit Bot{%else%}Add Bot{%endif%}
        </button>
      </div>
    </div>
    {{bot.form.csrf_token}}
  </form>
   </div>

</div>
<script src="/static/assets/js/bundle.min.js"></script>
<script src="/static/assets/js/main.js"></script>
{% if mode == "edit" %}
  <hr
    style="
      font-size: 20px;
      border-top-width: 1px;
      border-top-color: #eee;
      width: 90%;
    "
  />
  <div>
	      <div class="form-group" style="width: 80%; margin: 0 auto; height: auto; margin-top: 30px; color: rgba(255, 255, 255, 0.87)">
		              <div class="form-group" class="d-flex justify-content-center" style="margin: 15px auto; width: 85%;text-align: center; color: white; font-weight: bold; overflow-wrap: anywhere;">
				          <div style="margin 15px auto">
    <h6 style="margin-bottom: 4.5px;">Events are a great way to deliver important updates for your bot!</h6>
            <a href="/apiweb/{{bot.api_token}}">
		<button class="btn btn-outline-light" style="margin-top: 20px; margin-bottom: 35px">
				              Configure Events (APIWeb)
					              </button>
	   </a>
    <h6 style="margin-top: 30px;">Delete Bot</h6>
    <p style="margin-bottom: 3px;">Warning: This cannot be undone</p>
    {% if bot.banned and not staff[0] %}
    <h5>You may not delete your bot as it has been banned</h5>
    {% else %}
    <form method="POST" action="/bot/{{bot.bot_id}}/delete">
	{{bot.form.csrf_token}}
        <button
          class="btn btn-danger"
	  type="submit" 
          style="margin-top: 20px; margin-bottom: 30px"
        >
          Delete Bot
        </button>
    	<input type="hidden" name="confirmer" value="{{epoch}}"/>
    </form>
    {% endif%}
    </div>
			      </div>
	      </div>
  </div>
  {% endif %}
<script>
  {% if mode == "edit" %}
  const selected_tags = [
      {% for tag in bot.tags %}
        "{{tag}}",
      {% endfor %}
  ]
  {% else %} 
  const selected_tags = []
  {% endif %}
  const myOptions = [
      {% for tag, new_tag in tags_fixed.items() %}

    {
      label: '{{new_tag}}',
          value: '{{tag}}',
        },
        {% endfor %}
      ]
  var instance = new SelectPure(".select_tags", {
      options: myOptions,
      autocomplete: true, // default: false
      multiple: true,
      icon: "fa fa-times",
      value: selected_tags,
  });

  $("#bot_form").submit(function (eventObj) {
      var input = $("<input>").attr({ "type": "hidden", "name": "tags" }).val(instance.value());
      $('#bot_form').append(input);
      return true;
  });

</script>

{% endblock %} {% block footer %} {% endblock %}
