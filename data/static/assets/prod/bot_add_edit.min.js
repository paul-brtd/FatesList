var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,g){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");
function submitBot(a){modalShow("Adding Bot..","Please wait for a few minutes...");try{json=$j("#botform").serializeJSON(),tags=document.querySelector("#tags").values,toReplace={tags:document.querySelector("#tags").values,extra_owners:json.extra_owners.replace(" ","").split(","),features:document.querySelector("#features").values},keys=["extra_owners","tags","features"],keys.forEach(function(b){json[b]=toReplace[b].filter(function(c){return""!==c})}),"edit"==context.mode?(json.bot_id=context.bot_id,
method="PATCH"):method="PUT",keys=["long_description_type","nsfw","keep_banner_decor","webhook_type"],keys.forEach(function(b){json[b]=document.querySelector("#"+b).value}),0==json.tags.length||""==json.tags[0]?modalShow("Error","You need to select tags for your bot!"):$j.ajax({url:"/api/users/"+context.user_id+"/bots/"+json.bot_id,method:method,headers:{Authorization:context.user_token},contentType:"application/json",data:JSON.stringify(json),statusCode:{202:function(b){modalShow("Success","Your bot (and its changes) has been added to the RabbitMQ queue. Your page should auto refresh to it in a few minutes");
setTimeout(setInterval(function(){$j.ajax({url:"/api/bots/"+json.bot_id,method:"HEAD",statusCode:{200:function(c){window.location.replace("/bot/"+json.bot_id)}}})},2E3),1E3)},400:function(b){modalShow("Error",b.responseJSON.reason)},422:function(b){json=JSON.stringify(b.responseJSON);modalShow("An error occurred during initial proccessing. Try again later",json)},429:function(b){modalShow("Ratelimited",b.responseJSON.detail)},404:function(b){modalShow("API is down","Unfortunately, the Fates List API is down right now. Please try again later")},
500:function(b){modalShow("Internal Server Error","We had an error internally on our side when proccessing your request. Please try again later.")}}})}catch(b){alert(b)}}
function deleteBot(){(bot_id_prompt=prompt("In order to confirm your request, please enter the Bot ID for your bot",""))&&bot_id_prompt==context.bot_id?(modalShow("Deleting Bot..","Please wait..."),$j.ajax({url:"/api/users/"+context.user_id+"/bots/"+context.bot_id,method:"DELETE",headers:{Authorization:context.user_token},contentType:"application/json",statusCode:{202:function(a){modalShow("Bot Deleted :(","This bot has been added to our queue of bots to delete and will be deleted in just a second or two");
setTimeout(setInterval(function(){$j.ajax({url:"/api/bots/"+context.bot_id,method:"GET",statusCode:{404:function(b){window.location.replace("/")}}})},2E3),1E3)},400:function(a){modalShow("Error",a.responseJSON.reason)},422:function(a){json=JSON.stringify(a.responseJSON);modalShow("An error occurred during initial proccessing. Try again later",json)},429:function(a){modalShow("Ratelimited",a.responseJSON.detail)},404:function(a){modalShow("API is down","Unfortunately, the Fates List API is down right now. Please try again later")},
500:function(a){modalShow("Internal Server Error","We had an error internally on our side when proccessing your request. Please try again later.")}}})):modalShow("Failed to delete bot","This bot couldn't be deleted as you did not confirm that you wanted to do this!")}
function previewLongDesc(){html=document.querySelector("#long_description_type").value;ld=document.querySelector("#long_description").value;headers="edit"==context.mode?{Authorization:context.bot_token}:{};""!=ld&&$j.ajax({type:"POST",dataType:"json",headers:headers,contentType:"application/json",url:"/api/preview?lang="+context.site_lang,data:JSON.stringify({html_long_description:html,data:ld}),statusCode:{200:function(a){$j("#ld-preview").html(a.html)},429:function(a){modalShow("Rate Limited",a.responseJSON.detail)},
422:function(a){modalShow("Error",JSON.stringify(a))}}})}
function showToken(a){token=document.querySelector("#apitok");"none"==token.style.display?(document.querySelector("#hidden_token").style.display="none",document.querySelector("#apitok").style.display="block",document.querySelector("#apitok").innerHTML=context.bot_token,a.innerHTML="Hide API Token"):(document.querySelector("#hidden_token").style.display="inline-block",document.querySelector("#apitok").style.display="none",a.innerHTML="Show API Token")}
function postStats(){server_count=document.querySelector("#server-count").value;payload={guild_count:server_count};$j.ajax({headers:{Authorization:context.bot_token},method:"POST",url:"/api/bots/"+context.bot_id+"/stats",contentType:"application/json",data:JSON.stringify(payload)});modalShow("Success","Done posting stats. You may leave this page or continue editing this bot!")}
function regenToken(){$j.ajax({headers:{Authorization:context.bot_token},type:"PATCH",url:"/api/bots/"+context.bot_id+"/token",processData:!1,contentType:"application/json"});alert("Regenerated Token Successfully");window.location.reload()}
function testHook(){headers={Authorization:context.bot_token};$j.ajax({url:"/api/bots/"+context.bot_id+"/testhook",dataType:"json",headers:headers,type:"POST",processData:!1,contentType:"application/json",statusCode:{200:function(a){modalShow("Sent Test Query","If you do not get the test webhook, make sure you have editted the bot with the webhook url first by adding the Webhook URL and THEN clicking Edit and then try again")},400:function(a){modalShow("Error",a.responseJSON.reason)},404:function(a){modalShow("Error",
a.responseJSON.reason)}}})};
